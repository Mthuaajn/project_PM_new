<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>QL NHÀ SÁCH</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css"
    />
    <link rel="stylesheet" href="/css/sach/qlsach.css" />
  </head>
  <body>
    <h1 id="title">Quản lý thông tin sách</h1>
    <section id="book-management">
      <form action="/sach/qlsach" id="book-form" method="post">
        <div id="main-form">
          <div id="left">
            <div class="mb-3 form-item">
              <label for="bookId" class="form-label">Mã Sách</label>
              <select id="bookId" class="form-select" name="bookId" aria-label="Chọn thể loại">
                <option selected>Chọn Mã sách</option>
                {{#each books}}
                  <option value="{{masach}}">{{masach}}</option>
                {{/each}}
              </select>

            </div>
            <div class="mb-3 form-item">
              <label for="bookName" class="form-label">Tên Sách</label>
              <input
                type="text"
                class="form-control"
                id="bookName"
                name="bookName"
                placeholder="Nhập tên sách"
              />
            </div>
            <div class="mb-3 form-item">
              <label for="bookAuthor" class="form-label">Tác Giả</label>
              <input
                type="text"
                class="form-control"
                id="bookAuthor"
                name="bookAuthor"
                placeholder="Nhập tác giả"
              />
            </div>
          </div>
          <div id="right">
            <div class="mb-3 form-item">
              <label for="bookCate" class="form-label">Thể loại</label>
              <select id="bookCate" class="form-select" name="bookCate" aria-label="Chọn thể loại">
                <option selected>Chọn thể loại</option>
                {{#each theloais}}
                  <option value="{{tentheloai}}">{{tentheloai}}</option>
                {{/each}}
              </select>
            </div>
            <div class="mb-3 form-item">
              <label for="bookPublisher" class="form-label">Nhà xuất bản</label>
              <select
                id="bookPublisher"
                class="form-select"
                name="bookPublisher"
                aria-label="Nhà xuất bản"
              >
                <option selected>Chọn nhà xuất bản</option>
                {{#each nxbs}}
                  <option value="{{tennxb}}">{{tennxb}}</option>
                {{/each}}
              </select>
            </div>
            <div class="mb-3 form-item">
              <label for="bookPrice" class="form-label">Đơn giá</label>
              <input
                type="text"
                class="form-control"
                id="bookPrice"
                name="bookPrice"
                placeholder="Nhập đơn giá"
              />
            </div>
          </div>
        </div>
        <div id="btn-list">
          <button type="submit" name="action" value="add" class="btn btn-primary">Thêm Sách</button>
          <button type="submit" name="action" value="delete" class="btn btn-secondary">Xóa sách</button>
          <button type="submit" name="action" value="update" class="btn btn-success">Cập nhật sách</button>
        </div>
      </form>
      <div id="book-list" style="margin:10px;">
        <table class="table table-bordered">
          <thead>
            <tr>
              <th scope="col">Mã Sách</th>
              <th scope="col">Tên Sách</th>
              <th scope="col">Tác giả</th>
              <th scope="col">Đơn giá</th>
              <th scope="col">Nhà xuất bản</th>
              <th scope="col">Thể loại</th>
              <th scope="col">Số lượng</th>
            </tr>
          </thead>
          <tbody>
            {{#each books}}
              <tr>
                <th scope="row">{{masach}}</th>
                <td>{{tensach}}</td>
                <td>{{tacgia}}</td>
                <td>{{dongia}}</td>
                <td>{{nhaxuatban}}</td>
                <td>{{theloai}}</td>
                <td>{{soluongton}}</td>
              </tr>
            {{/each}}
          </tbody>
        </table>
      </div>
    </section>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
      crossorigin="anonymous"
    ></script>
  </body>
</html>

<script>
  $(document).ready(function() { const urlParams = new URLSearchParams(window.location.search);
  const message = urlParams.get('message'); if (message) { alert(message); } });
</script>